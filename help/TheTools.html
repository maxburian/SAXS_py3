

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Tools &mdash; SAXS py3.5 V3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'py3.5 V3',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Saxsdog Network" href="Server.html" />
    <link rel="prev" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SAXS
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-saxsdog">The Saxsdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-converter">The Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotchi">Plotchi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saxsdmerge">Saxsdmerge</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Server.html">The Saxsdog Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSSchemaDoc.html">The Dedector Calibration File</a></li>
<li class="toctree-l1"><a class="reference internal" href="TheTechnology.html">The Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="LeashDeveloperDoc.html">SAXSDOG Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSapi.html">SAXS Module API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SAXS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The Tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/TheTools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-tools">
<h1>The Tools<a class="headerlink" href="#the-tools" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-saxsdog">
<span id="saxsdog"></span><h2>The Saxsdog<a class="headerlink" href="#the-saxsdog" title="Permalink to this headline">¶</a></h2>
<p>The saxsdog is a script that converts directories with images to curves. It can use multiple threads and watch the file system for changes.</p>
<p>For help on the usage type:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ saxsdog --help
Usage: saxsdog [options] directory/to/watch

Options:
  -h, --help            Show this help message and exit.
  -c FILE, --calibration=FILE
                        Path to calibration file (JSON).
  -t THREADS, --threads=THREADS
                        Number of concurrent threads.
  -m, --plotmonitor     Show a live updating plot window.
  -w, --watch           Watch directory for changes, using file system events
                        recursively for all sub directories.
  -r, --resume          Skip files that are already converted.
  -o OUTDIR, --out=OUTDIR
                        Specify output directory.
  -R RELPATH, --relpath=RELPATH
                        Specify output directory as relative path to image
                        file. Default: &#39;../work&#39;
  -s, --svg             Write plot to svg file.
  -p, --png             Write png of original.
  -P, --profile         Make a time Profile and print it.
  -S, --silent          Less output.
  -n, --nowalk          Don&#39;t scan for files already there, only watch file
                        system if -w flag is given.
  -D, --walkdirinthreads
                        Search all directories in parallel process.
  -V, --servermode      Servermode.
</pre></div>
</div>
<p>The calibration file must be a valid <a class="reference internal" href="SAXSSchemaDoc.html#root"><span class="std std-ref">Calibration file Reference</span></a></p>
</div>
<div class="section" id="the-converter">
<span id="converter"></span><h2>The Converter<a class="headerlink" href="#the-converter" title="Permalink to this headline">¶</a></h2>
<p>The converter extracts information from the calibration.txt generated by fit2d and adds them to a SAXS.calibration configuration file. (<a class="reference internal" href="SAXSSchemaDoc.html#root"><span class="std std-ref">Calibration file Reference</span></a>)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ saxsconverter  --help
Usage: 
To extract data from Fit2d output:
  saxsconverter [options] calibration.txt ouput.saxsconf
Or to convert fom older saxsconf:
  saxsconverter [options] cal.saxsconf ouput.saxsconf


Options:
  -h, --help            show this help message and exit
  -t FILE, --template=FILE
                        Path to calibration file which serves as template.
</pre></div>
</div>
<p>If there is a  target file and it is a valid <a class="reference internal" href="SAXSSchemaDoc.html#root"><span class="std std-ref">Calibration file Reference</span></a>, the parsed values are added or updated in place.</p>
</div>
<div class="section" id="plotchi">
<span id="id1"></span><h2>Plotchi<a class="headerlink" href="#plotchi" title="Permalink to this headline">¶</a></h2>
<p>The tool “plotchi”  plots a list of “.chi”-files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ plotchi  --help
Usage: plotchi [options] CHIFILE [List of more &quot;.chi&quot; files]

Options:
  -h, --help            show this help message and exit
  -o FILE, --out=FILE   Write the plot to FILE. The format is derived from the
                        suffix, e.g. &#39;.svg&#39;,&#39;.pdf&#39;.
  -c, --compare         Compare datasets to first one.
  -l, --log             Use log scale.
  -n, --no-legend       Hide legend.
  -t TITLE, --title=TITLE
                        Give plot title.
  -s N, --skip=N        Skip first N points.
  -k N, --clip=N        Clip last N points.
  -x TYPE, --xaxsistype=TYPE
                        Select type of X axis scale, might be
                        [linear|log|symlog]
  -y TYPE, --yaxsistype=TYPE
                        Select type of Y axis scale, might be
                        [linear|log|symlog]
</pre></div>
</div>
</div>
<div class="section" id="saxsdmerge">
<span id="id2"></span><h2>Saxsdmerge<a class="headerlink" href="#saxsdmerge" title="Permalink to this headline">¶</a></h2>
<p>This tool adresses a very specific problem only applicable under our beamlines needs.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ saxsdmerge   --help
Usage: saxsdmerge [options] iMPicture/dir peakinteg.log datalogger.log

Options:
  -h, --help            show this help message and exit
  -t SEC, --timeoffset=SEC
                        Time offset between logging time and time in
                        imagedata.
  -1, --syncfirst       Sync time by taking the time difference between first
                        shutter action and first image.
  -z, --synczero        Sync time by taking the time difference between first
                        shutter action and the zero.tif image.
  -o FILE, --outfile=FILE
                        Write merged dataset to this file. Format is derived
                        from the extesion.(.csv|.json|.hdf)
  -b, --batch           Batch mode (no plot).
  -c, --includechi      Include radial intensity data (.chi) in hdf.
  -f, --includetif      Include  all image data in hdf.
  -C FILE, --conf=FILE  Use config in  FILE to merge the data (ignore other
                        options)
</pre></div>
</div>
<p>What it does is the following: It merges the two log files by interpolating the missing data in the joined table of the the 1 sec interval data logger and the shutter log. The interpolation method takes the closest previous entry. The two logfiles are presumed to have the same clock. This data is then merged with the data extracted from the image headers and dedector logs and is written to a output file as a Table. As the image time stamps are from a different clock which might have a significant offset, the <code class="docutils literal notranslate"><span class="pre">-1</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code> options allow for dealing with that. In order to check if the time synchronization is reasonable, the tool displays a graph with the shutter times and the exposure times from the images.</p>
<p>One of the output file format options is hdf, the hirarchical data format, which ia a way to create portable binary data files. If you specify hdf, the radial average function “<code class="docutils literal notranslate"><span class="pre">.chi</span></code>” and even the image data  can be written to the hdf file. The hdf export is done with pandas hdf exporter which in turn uses <a class="reference external" href="http://www.pytables.org/">PyTables</a>. The “<code class="docutils literal notranslate"><span class="pre">.chi</span></code>” files reside under the “Graphs” Label, the log data under the “LogData” label and the images if present under the “Images” Label. It can be restored to a Pandas pannel or data frame with:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">store</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;/home/chm/saxs/merged.hdf&quot;</span><span class="p">)</span>
<span class="n">Curves</span><span class="o">=</span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;Curves&quot;</span><span class="p">]</span> <span class="c1"># gives Pandas panel with all the curves</span>
<span class="n">Data</span><span class="o">=</span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;Data&quot;</span><span class="p">]</span> <span class="c1"># gives Pandas data frame of merged log and image parameters</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Server.html" class="btn btn-neutral float-right" title="The Saxsdog Network" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright  2019, Tu Graz, Christian Meisenbichler, Max Burian, Heinz Amenitsch

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>